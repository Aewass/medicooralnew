---
import { Menu, X } from 'lucide-astro'
import { Image } from 'astro:assets';
import toothLogo from '../assets/tooth.png';
import LanguageSwitcher from './LanguageSwitcher.astro';
import { translations } from '../i18n/translations';

const currentLang = Astro.url.pathname.split('/')[1] || 'bs';
const t = translations[currentLang].nav;
---

<header class="fixed top-0 w-full bg-white/95 backdrop-blur-sm shadow-sm z-50">
  <div class="max-w-7xl mx-auto px-5">
    <nav class="relative flex items-center justify-between h-20">
      <!-- Logo section -->
      <a href="#hero" class="flex items-center gap-3 hover:opacity-75 transition-opacity">
        <Image 
          src={toothLogo} 
          alt="Medico Oral logo" 
          width={32} 
          height={32}
          class="w-8 h-8"
        />
        <span class="font-primary font-semibold text-xl text-primary">
          Medico Oral
        </span>
      </a>

      <!-- Language Switcher and Navigation Links Container -->
      <div class="flex items-center gap-4">
        <LanguageSwitcher />
        
        <!-- Navigation links -->
        <div class="hidden md:flex items-center gap-8">
          <a href="#hero" class="nav-link">{t.home}</a>
          <a href="#services" class="nav-link">{t.services}</a>
          <a href="#about" class="nav-link">{t.about}</a>
          <a href="#history" class="nav-link">{t.history}</a>
          <a href="#team" class="nav-link">{t.team}</a>
          <a 
            href="#contact"
            class="px-6 py-2.5 bg-[#1199ee] text-white rounded-full font-primary font-medium 
                   hover:bg-[#1b3b6f] hover:scale-105 active:scale-95
                   transition-all duration-200 shadow-lg hover:shadow-xl"
          >
            {t.contact}
          </a>
        </div>

        <!-- Mobile menu button -->
        <button id="menu-toggle" class="md:hidden">
          <Menu id="menu-open" size={24} class="text-primary" />
          <X id="menu-close" size={24} class="hidden text-primary" />
        </button>
      </div>

      <!-- Mobile menu -->
      <div id="mobile-menu" class="fixed inset-0 bg-white opacity-0 pointer-events-none md:hidden transition-all duration-300">
        <div class="flex flex-col items-center justify-center min-h-screen gap-8">
          <a href="#hero" class="nav-link text-2xl">{t.home}</a>
          <a href="#services" class="nav-link text-2xl">{t.services}</a>
          <a href="#about" class="nav-link text-2xl">{t.about}</a>
          <a href="#history" class="nav-link text-2xl">{t.history}</a>
          <a href="#team" class="nav-link text-2xl">{t.team}</a>
          <a 
            href="#contact"
            class="text-2xl px-8 py-3 bg-[#1199ee] text-white rounded-full font-primary font-medium 
                   hover:bg-[#1b3b6f] hover:scale-105 active:scale-95
                   transition-all duration-200 shadow-lg hover:shadow-xl"
          >
            {t.contact}
          </a>
        </div>
      </div>
    </nav>
  </div>
</header>

<style>
  .nav-link {
    @apply font-primary text-primary hover:text-secondary transition-colors relative;
  }

  @media (min-width: 768px) {
    .nav-link:not(:last-child) {
      @apply after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 
             after:bg-secondary after:transition-all after:duration-300
             hover:after:w-full;
    }
  }
</style>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOpen = document.getElementById('menu-open');
  const menuClose = document.getElementById('menu-close');

  menuToggle?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('opacity-0');
    mobileMenu?.classList.toggle('pointer-events-none');
    menuOpen?.classList.toggle('hidden');
    menuClose?.classList.toggle('hidden');
  });

  // Close mobile menu when clicking a link
  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('opacity-0', 'pointer-events-none');
      menuOpen?.classList.remove('hidden');
      menuClose?.classList.add('hidden');
    });
  });
</script> 